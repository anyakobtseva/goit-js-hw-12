{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst PIXABAY_URL = 'https://pixabay.com/api/';\nconst API_KEY = import.meta.env.VITE_API_KEY;\nconst ligthbox = new SimpleLightbox('.gallery a');\nconst loadMoreBt = document.querySelector('.bt');\n\nconst config = {\n  params: {\n    key: API_KEY,\n    image_type: 'photo',\n    per_page: 40,\n    orientation: 'horizontal',\n    safesearch: true,\n    page: 1,\n    q: '',\n  },\n};\n\niziToast.settings({\n  timeout: 10000,\n  resetOnHover: true,\n  icon: null,\n  position: 'topRight',\n  close: false,\n  closeOnClick: true,\n  closeOnEscape: true,\n});\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = event.target.search.value;\n  config.params.q = query;\n  config.params.page = 1;\n  gallery.innerHTML = '';\n  loader.style.display = 'flex';\n\n  try {\n    const images = await axios.get(PIXABAY_URL, config);\n    if (images.data.hits.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    }\n    gallery.append(...images.data.hits.map(image => createGalleryItem(image)));\n    ligthbox.refresh();\n    loadMoreBt.style.display = 'block';\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\nloadMoreBt.addEventListener('click', async () => {\n  config.params.page += 1;\n  const images = await axios.get(PIXABAY_URL, config);\n  gallery.append(...images.data.hits.map(image => createGalleryItem(image)));\n  ligthbox.refresh();\n});\n\nconst createGalleryItem = image => {\n  const liEl = document.createElement('li');\n  liEl.className = 'gallery-item';\n  const linkEl = document.createElement('a');\n  linkEl.className = 'gallery-link';\n  linkEl.href = image.largeImageURL;\n  liEl.appendChild(linkEl);\n  const imEl = document.createElement('img');\n  imEl.className = 'gallery-image';\n  imEl.src = image.webformatURL;\n  imEl.title = image.tags;\n  imEl.dataset.source = image.largeImageURL;\n  const ulEl = document.createElement('ul');\n  ulEl.className = 'tags';\n\n  const lis = generateTags({\n    Likes: image.likes,\n    Views: image.views,\n    Comments: image.comments,\n    Downloads: image.downloads,\n  });\n\n  linkEl.appendChild(imEl);\n  ulEl.append(...lis);\n  linkEl.appendChild(ulEl);\n  return liEl;\n};\n\nconst generateTags = obj => {\n  const lis = [];\n  Object.keys(obj).forEach(key => {\n    const li = document.createElement('li');\n    li.textContent = key;\n    const p = document.createElement('p');\n    p.textContent = obj[key];\n    li.appendChild(p);\n    lis.push(li);\n  });\n\n  return lis;\n};\n"],"names":["form","gallery","loader","PIXABAY_URL","API_KEY","ligthbox","SimpleLightbox","loadMoreBt","config","iziToast","event","query","images","axios","image","createGalleryItem","error","liEl","linkEl","imEl","ulEl","lis","generateTags","obj","key","li","p"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,2BACdC,EAAU,qCACVC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAa,SAAS,cAAc,KAAK,EAEzCC,EAAS,CACb,OAAQ,CACN,IAAKJ,EACL,WAAY,QACZ,SAAU,GACV,YAAa,aACb,WAAY,GACZ,KAAM,EACN,EAAG,EACJ,CACH,EAEAK,EAAS,SAAS,CAChB,QAAS,IACT,aAAc,GACd,KAAM,KACN,SAAU,WACV,MAAO,GACP,aAAc,GACd,cAAe,EACjB,CAAC,EAEDT,EAAK,iBAAiB,SAAU,MAAMU,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,OAAO,MAClCF,EAAO,OAAO,EAAIG,EAClBH,EAAO,OAAO,KAAO,EACrBP,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,OAEvB,GAAI,CACF,MAAMU,EAAS,MAAMC,EAAM,IAAIV,EAAaK,CAAM,EAClD,GAAII,EAAO,KAAK,KAAK,SAAW,EAC9B,MAAM,IAAI,MACR,2EACR,EAEIX,EAAQ,OAAO,GAAGW,EAAO,KAAK,KAAK,IAAIE,GAASC,EAAkBD,CAAK,CAAC,CAAC,EACzET,EAAS,QAAO,EAChBE,EAAW,MAAM,QAAU,OAC5B,OAAQS,EAAP,CACAP,EAAS,MAAM,CACb,QAASO,EAAM,OACrB,CAAK,CACL,QAAY,CACRd,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAEDK,EAAW,iBAAiB,QAAS,SAAY,CAC/CC,EAAO,OAAO,MAAQ,EACtB,MAAMI,EAAS,MAAMC,EAAM,IAAIV,EAAaK,CAAM,EAClDP,EAAQ,OAAO,GAAGW,EAAO,KAAK,KAAK,IAAIE,GAASC,EAAkBD,CAAK,CAAC,CAAC,EACzET,EAAS,QAAO,CAClB,CAAC,EAED,MAAMU,EAAoBD,GAAS,CACjC,MAAMG,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,eACjB,MAAMC,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,UAAY,eACnBA,EAAO,KAAOJ,EAAM,cACpBG,EAAK,YAAYC,CAAM,EACvB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,gBACjBA,EAAK,IAAML,EAAM,aACjBK,EAAK,MAAQL,EAAM,KACnBK,EAAK,QAAQ,OAASL,EAAM,cAC5B,MAAMM,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,OAEjB,MAAMC,EAAMC,EAAa,CACvB,MAAOR,EAAM,MACb,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,SACrB,CAAG,EAED,OAAAI,EAAO,YAAYC,CAAI,EACvBC,EAAK,OAAO,GAAGC,CAAG,EAClBH,EAAO,YAAYE,CAAI,EAChBH,CACT,EAEMK,EAAeC,GAAO,CAC1B,MAAMF,EAAM,CAAA,EACZ,cAAO,KAAKE,CAAG,EAAE,QAAQC,GAAO,CAC9B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAcD,EACjB,MAAME,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,YAAcH,EAAIC,GACpBC,EAAG,YAAYC,CAAC,EAChBL,EAAI,KAAKI,CAAE,CACf,CAAG,EAEMJ,CACT"}